## TSLib 基础扩展库

### 获取扩展版本号

```lua
require "TSLib"--使用本函数库必须在脚本开头引用并将文件放到设备 lua 目录下
dialog(TSVersions()) --返回版本号字符串，返回值如：1.1.1
```

### compareVersion 比较版本号

| 参数 |  类型  | 必填 |               说明               |
| :--: | :----: | :--: | :------------------------------: |
|  v1  | string |  是  | 需要比较的版本号，参数需要大于 0 |
|  v2  | string |  是  | 需要比较的版本号，参数需要大于 0 |

| 返回值 |  类型  | 说明                                                         |
| :----: | :----: | :----------------------------------------------------------- |
|  size  | string | 如果 v1 大于 v2 返回 1，如果 v2 大于 v1 返回 2，v1 与 v2 相同返回 3 |

```lua
require("TSLib")
local m = TSVersions()
--注意：仅支持 TSLib v1.2.9 及其以上版本
size = compareVersion(m,"1.3.4")
if size == 3 then
    dialog("TSLib 版本号为 1.3.4")
elseif  size == 1  then
    dialog("TSLib 版本号大于 1.3.4")
elseif  size == 2  then
    dialog("TSLib 版本号小于 1.3.4")
end
```

### 函数：checkTSLibrary 检测加载插件

| 参数 |  类型  | 必填 | 说明                           |
| :--: | :----: | :--: | :----------------------------- |
| name | string |  是  | 插件或函数库名称，`aso`、`vpn` |

| 返回值 |  类型   | 说明                              |
| :----: | :-----: | :-------------------------------- |
|  bool  | boolean | true - 查询成功，false - 查询失败 |
|  msg   | string  | 查询结果或错误信息                |

```lua
--[[
    vpn = VPN 插件
 --]]
require "TSLib"--使用本函数库必须在脚本开头引用并将文件放到设备 lua 目录下
local bool,msg = checkTSLibrary("tsvpn") -- TSLib 1.2.5 以上版本支持此函数 
dialog((bool and "成功 : " or "失败 : ") .. msg)
```

### 函数：tap 点击

tap(x,y,{ms,pic,index})

| 参数  |  类型  | 必填 | 说明                                                         |
| :---: | :----: | :--: | :----------------------------------------------------------- |
|   x   | number |  是  | 屏幕横坐标                                                   |
|   y   | number |  是  | 屏幕纵坐标                                                   |
|  ms   | number |  否  | 时间，缺省默认为 50，单位毫秒                                |
|  pic  | string |  否  | 点击效果图路径，仅支持函数库 v1.2.4 及其以上版本 支持绝对路径和相对路径，相对路径默认为 res 目录， 图片不存在则不显示点击位置 |
| index | number |  否  | 手指序号，仅支持函数库 v1.3.0 及其以上版本 默认不写随机手指序号，推荐使用 1-9 |

```lua
--此函数为触动精灵专用函数请勿用于积木编程
require "TSLib"--使用本函数库必须在脚本开头引用并将文件放到设备 lua 目录下
--index 参数仅支持函数库 v1.3.0 及其以上版本 TSLib
--pic 参数仅支持函数库 v1.2.4 及其以上版本 TSLib
tap(100,200,50,"1.png",1) --点击坐标(100,200),默认按下 50 毫秒后抬起
--tap(100,200,{["ms"]=50,["index"] = 1,["pic"] ="1.png"})
```

### 函数：moveTo 滑动

moveTo(x1,y1,x2,y2,step,ms,{index,stop})

| 参数  |     类型     | 必填 | 说明                                                         |
| :---: | :----------: | :--: | :----------------------------------------------------------- |
|  x1   |    number    |  是  | 屏幕起点横坐标                                               |
|  y1   |    number    |  是  | 屏幕起点纵坐标                                               |
|  x2   |    number    |  是  | 屏幕终点横坐标                                               |
|  y2   |    number    |  是  | 屏幕终点纵坐标                                               |
| step  |    number    |  否  | 滑动速度，不写默认为 10 px                                   |
|  ms   |    number    |  否  | 弹起时间，不写默认为 50 毫秒                                 |
| index | table/number |  否  | 手指序号，仅支持函数库 v1.3.0 及其以上版本 默认不写随机手指序号，推荐使用 1 - 9 |
| stop  |   boolean    |  否  | 是否解决惯性滑动，仅支持函数库 v1.3.1 及其以上版本 默认 0 不进行处理，1 - 精准滑动，解决惯性问题 |

```lua
--此函数为触动精灵专用函数请勿用于积木编程
require "TSLib"--使用本函数库必须在脚本开头引用并将文件放到设备 lua 目录下
--从坐标(100,100)滑动到(300,100)，步长为 20 像素，默认移到另一点等待 70 毫秒弹起
--index 参数仅支持 TSLib v1.3.0 及其以上版本
--step 步长不宜超过 50 像素
--stop 参数仅支持 TSLib v1.3.1 及其以上版本
moveTo(100,100,300,100,{["step"] = 20,["ms"] = 70,["index"] = 1,["stop"] = 1}) 
--moveTo(100,100,300,100,20,70,1,1)
```

- 步长不宜超过 50

### 函数：randomTap 随机点击

randomTap(x,y,r,pic,index,ms)

| 参数  |  类型  | 必填 | 说明                                                         |
| :---: | :----: | :--: | :----------------------------------------------------------- |
|   x   | number |  是  | 屏幕横坐标                                                   |
|   y   | number |  是  | 屏幕纵坐标                                                   |
|   r   | number |  否  | 随机值，缺省默认为 5px                                       |
|  pic  | string |  否  | 点击效果图路径，此参数仅支持函数库 v1.2.4 及其以上版本 支持绝对路径和相对路径，相对路径默认为 res 目录， 图片不存在则不显示点击位置 |
| index | number |  否  | 手指序号，仅支持函数库 v1.3.0 及其以上版本 默认不写随机手指序号，推荐使用 1-9 |
|  ms   | number |  否  | 弹起时间，不写默认为 50 毫秒，仅支持函数库 v1.3.5 及其以上版本 |

